---
title: "Demystifying Machine Learning - Training Exercises"
author: Alexander Lemm
output: 
  tutor::tutorial:
    toc_float: true
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(tutor)
tutor_options(exercise.completion = TRUE)
knitr::opts_chunk$set(echo = FALSE)
```

This course will give you a hands-on introduction to the typcial steps of the data science process. Leveraging real-life credit data we will show you how to import, clean and explore data. Moreover, we will teach you how to model credit risk by using decision trees in R.  



# R Introduction

Before we get started, you need to know a little bit about R and its underlying principles. R is a *functional programming language* in contrast to Java which is object-oriented and which most of you use on a daily basis. Usually, when you work with R, you use a functional programming style.

Functional languages make a lot of sense when you have a more or less fixed set of *things*, and as your code evolves, you primarily add new operations on existing things. For instance, R comes with 20 types of objects that represent the basic building blocks for data analysis. Surprisingly, those 20 objects are all you need for getting things done when analyzing data.

When you develop new stuff with a functional mindset you typically start by thinking about what your function should do. Next, you think about what objects get passed into the function as arguments and finally, you think about what objects are returned by the function.

When looking at code you can spot the difference between the two programming styles as follows: In an object-oriented language you would call a method of an object using the "dot" notation: *object.function(argument)*. In contrast, in a functional programming language the call would look as follows *function(object, argument)*.

In this course we will primarily deal with the following two object types: *data frames* and *atomic vectors*.

A *data frame* is used for storing data tables. Just think of it as being a single Excel sheet. Ideally, each line of the sheet represents one *observation/case*. Each column contains measurements on one variable which are specific for the respective observation. In R speech a data frame is a list of vectors of equal length. Continuing with the Excel analogy the sheet's columns are the vectors.

The *atomic vector* is the simplest R data type. Atomic vectors are linear vectors of a single primitive type. The four common types of atomic vectors are logical, integer, double, and character. Individual numbers or strings, which are scalars in other languages, are actually vectors of length one in R.

But enough theory for now, time to practice. In the following exercises you will learn some basic R commands to explore data frames and vectors in detail. 


## Exercises

### Exercise 1

Every R session comes with a bunch of data sets which are directly available even though the user didn't load them explicitly into memory. We will take advantage of that fact and take a closer look at the `mtcars` data set. The data set was extracted from the 1974 Motor Trend US magazine, and comprises fuel consumption and aspects of automobile design and performance for several automobiles (1973â€“74 models).

In the console below type `mtcars` and hit CTRL + Enter or click on the green 'Run Code' button. This will print the content of the data set to the console. 

```{r mtcars-print, exercise=TRUE}


```


### Exercise 2

Check out the class of the mtcars object by typing `class(mtcars)`

```{r mtcars-class, exercise=TRUE}


```

```{r mtcars-class-quiz}

question("What is the class of the mtcars object?",
    answer("numeric vector"),
    answer("list"),
    answer("data frame", correct = TRUE),
    answer("matrix"),
    allow_retry = TRUE
  )


```


### Exercise 3

Usually, you would not print the entire content of a data frame to the console like you did it in exercise 1. Instead, you would use the `head()` and `tail()` function to get a first glimpse on the data. By default, they return the first and respectively last 6 rows of a data frame. Try out both functions with the `mtcars` data frame below. 

```{r mtcars-head, exercise=TRUE}


```


### Exercise 4

To get some information about the data frame's dimensions you can use `nrow`, `ncol`, and `dim()`. Before trying out all three functions in the console below, think a few seconds about them. What do you expect them to return?

```{r mtcars-dim, exercise=TRUE}


```

```{r mtcars-dim-quiz}

question("Of how many rows and columns does the mtcars data frame consist?",
    answer("11 columns and 32 rows"),
    answer("12 rows and 31 columns"),
    answer("32 rows and 11 columns", correct = TRUE)
  )


```


### Exercise 5

One or perhaps THE most important function in R is `str()` which shows you the structure of an object. Try it out with the `mtcars` data frame.

```{r mtcars-str, exercise=TRUE}


```

`str()` returns a brief description of the data: 

* The object's class
* The object's dimensionality
* a list of names of the columns including their type and their primary values 


### Exercise 6

You can access an individual column of a specific data frame object, for instance named `my_data_frame`, using the `$` operator: `my_data_frame$desired_column`. 

In the console below execute `mtcars$mpg`. After that type `mtcars$` and hit 'tab'. This will show you all available columns of the data frame. Select 2-3 different columns and print their content to the console


```{r mtcars-dollar, exercise=TRUE}
mtcars$mpg

```
 

### Exercise 7

If you like to assign a data frame column's content to a new variable you have to type the following: `new_vector <- my_data_frame$column_name`. Yes, your eyes didn't trick you. Instead of `=`, R uses `<-` as its assignment operator.

In the console below we give you a small example. Go ahead and execute the code. Afterwards, assign the the cylinder column to a new variable `my_cyl` and print it to the console. Compare this output with `mtcars$cyl`.

```{r mtcars-assignment, exercise=TRUE}
my_mpg <- mtcars$mpg

```



```{r mtcars-assignment-quiz}

question("What are the last 3 values of my_cyl when printing it to the console?",
    answer("6, 8, 4", correct = TRUE),
    answer("8, 8, 4"),
    answer("6, 6, 4")
  )

```




# Problem Introduction

Modeling credit risk for both personal and company loans is of major importance for banks. The probability that a debtor will default is a key component in getting to a measure for credit risk. While introducing other models in this course as well, we focus on two model types that are often used in the credit scoring context; logistic regression and decision trees. We will teach you how to use them in this particular context, and how these models are evaluated by banks.

Contains information on past loans. Each line respresents one customer and his information along with the loan status indicator (`loan_status`) which equals 1 if the customer defaulted and 0 if the customer did not default. `loan status` will be used a the response variable. All other variables will be used as the explanatory variables:

* `loan_amnt`: Amount of the loan
* `int_rate`: Interest rate
* bureau score, A (highest credit worthiness) - G (lowest credit worthiness)
* `empl_length`: Emplolyment length
* `home_ownership`: Home ownership status
* `annual inc`: Annual income
* `age`: Age



# Importing Data

Right at the beginning you need to import your data into R. Otherwise you would not be able to do data science on it. Typcially, that means that you import the data from a database, a file or from a web API into a data frame in R.

The simplest case is obviously importing data from a file. When data is stored in a .csv file you can use the `read.csv()` function to import it. The first argument to `read.csv()` is the name of the file including an absolute or relative path to it.

## Exercise 1

Import `./www/loan_data.csv` and store it in a variable `loan_data`.

```{r import-data, exercise=TRUE}

```

```{r import-data-hint}
loan_data <- read.csv("./www/loan_data.csv")

```

## Exercise 2

Use the console below to get your answers to the questions of the following quiz levaraging the functions you just learned about the section "R Introduction" (`str`, `head`, etc.). 

```{r check-out-loan-data, exercise=TRUE}

```


```{r check-out-loan-data-quiz}

quiz(caption = "Quiz: Examining loan data",
     question("How many observations are stored in loan_data?",
              answer("8"),
              answer("19829"),
              answer("42"),
              answer("29091", correct = TRUE)
     ),
     question("How many variables are stored in loan_data?",
              answer("19829"),
              answer("42"),
              answer("8", correct = TRUE),
              answer("29091")
     ),
     question("How many variables of type integer are stored in loan_data?",
              answer("3", correct = TRUE),
              answer("4"),
              answer("1")
     ),       
     question("How many variables of type factor are stored in loan_data?",
              answer("3"),
              answer("4", correct = TRUE),
              answer("1")
     ),
     question("What is the annunal income of the last individual in the data set?",
              answer("22000", correct = TRUE),
              answer("200000"),
              answer("18000")
     ),
     question("What is the home ownership status of the second individual in the data set?",
              answer("OWN"),
              answer("RENT", correct = TRUE)
     )
)

```


# Cleaning Data

# Exploring Data

# Modeling Data

## Some Machine Learning Theory 


supervised learning 

respponse variable

explanatory variables



# Evaluating Data

